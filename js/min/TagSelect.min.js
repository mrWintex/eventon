function RemoveTag(t){$(t).closest(".tag").remove(),$("input[value="+$(t).closest(".tag").attr("id")+"]").remove(),$number_of_tags--,ReloadTagsList()}function ReloadTagsList(t){var a=JSON.stringify(GetTagList());$.ajax({type:"POST",url:"./php/post_search_manager.php",data:{tag_search:t,used_tags:a},success:function(t){$(".tag-autocomplete").html(t),$(".tag-autocomplete-item").on("click",function(){$number_of_tags+1>10||($number_of_tags++,$(this).hasClass("create-item")?$.ajax({type:"POST",url:"./php/tag_manager.php",data:{new_tag:$tag_input.val()},success:t=>{$(t).insertBefore($tag_input)}}):($('<input type="hidden" name="selected-tag['+$(this).attr("id")+']" value='+$(this).attr("id")+">").insertBefore($tag_input),$('<div class="tag" id='+$(this).attr("id")+'><span class="text">'+$(this).text()+'</span><button onclick="RemoveTag(this)"class="tag-delete-button" type="button"><i class="fa-solid fa-xmark"></i></button></div>').insertBefore(".tag-input")),$tag_input.val(""),$tag_autocomplete.html(""))})}})}function GetTagList(){return $used_tags=[],$(".tag-select .tag").each(function(){$used_tags.push($(this).text())}),$used_tags}$(function(){$tag_input=$(".tag-input"),$tag_autocomplete=$(".tag-autocomplete"),$tag_container=$(".tag-container"),$number_of_tags=0,$tag_input.on("input",function(){$value=25+8*$(this).val().length+"px",$(this).css("width",$value),""===$(this).val()?$tag_autocomplete.html(""):ReloadTagsList($(this).val())}).on("focusin",function(){$tag_autocomplete.css("display","block")}),$(document).on("click",function(t){$(t.target).closest(".tag-container").length||$(t.target).is(".tag-autocomplete-item")||$(t.target).closest(".tag-delete-button").length||$tag_autocomplete.css("display","none")}),$tag_container.on("click",()=>$tag_input.focus())});